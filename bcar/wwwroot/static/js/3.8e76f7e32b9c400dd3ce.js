webpackJsonp([3],{"2gjT":function(t,e,n){"use strict";function o(t){n("nnSp")}function i(t){n("y0+N")}Object.defineProperty(e,"__esModule",{value:!0});var a=n("mvHQ"),s=n.n(a),r=n("T8/m"),l=n("rHil"),u=n("QHDY"),c=n("/kga"),d=(c.a,Boolean,Boolean,String,String,Boolean,String,String,String,String,Number,String,String,String,Boolean,Object,Boolean,String,Boolean,Boolean,{name:"confirm",components:{XDialog:c.a},props:{value:{type:Boolean,default:!1},showInput:{type:Boolean,default:!1},placeholder:{type:String,default:""},theme:{type:String,default:"ios"},hideOnBlur:{type:Boolean,default:!1},title:String,confirmText:String,cancelText:String,maskTransition:{type:String,default:"vux-fade"},maskZIndex:[Number,String],dialogTransition:{type:String,default:"vux-dialog"},content:String,closeOnConfirm:{type:Boolean,default:!0},inputAttrs:Object,showContent:{type:Boolean,default:!0},confirmType:{type:String,default:"primary"},showCancelButton:{type:Boolean,default:!0},showConfirmButton:{type:Boolean,default:!0}},created:function(){this.showValue=this.show,this.value&&(this.showValue=this.value)},watch:{value:function(t){this.showValue=t},showValue:function(t){var e=this;this.$emit("input",t),t&&(this.showInput&&(this.msg="",setTimeout(function(){e.$refs.input&&e.setInputFocus()},300)),this.$emit("on-show"))}},data:function(){return{msg:"",showValue:!1}},methods:{getInputAttrs:function(){return this.inputAttrs||{type:"text"}},setInputValue:function(t){this.msg=t},setInputFocus:function(t){t&&t.preventDefault(),this.$refs.input.focus()},_onConfirm:function(){this.showValue&&(this.closeOnConfirm&&(this.showValue=!1),this.$emit("on-confirm",this.msg))},_onCancel:function(){this.showValue&&(this.showValue=!1,this.$emit("on-cancel"))}}}),h=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"vux-confirm"},[n("x-dialog",{attrs:{"dialog-class":"android"===t.theme?"weui-dialog weui-skin_android":"weui-dialog","mask-transition":t.maskTransition,"dialog-transition":"android"===t.theme?"vux-fade":t.dialogTransition,"hide-on-blur":t.hideOnBlur,"mask-z-index":t.maskZIndex},on:{"on-hide":function(e){return t.$emit("on-hide")}},model:{value:t.showValue,callback:function(e){t.showValue=e},expression:"showValue"}},[t.title?n("div",{staticClass:"weui-dialog__hd",class:{"with-no-content":!t.showContent}},[n("strong",{staticClass:"weui-dialog__title"},[t._v(t._s(t.title))])]):t._e(),t._v(" "),t.showContent?[t.showInput?n("div",{staticClass:"vux-prompt"},["checkbox"===t.getInputAttrs().type?n("input",t._b({directives:[{name:"model",rawName:"v-model",value:t.msg,expression:"msg"}],ref:"input",staticClass:"vux-prompt-msgbox",attrs:{placeholder:t.placeholder,type:"checkbox"},domProps:{checked:Array.isArray(t.msg)?t._i(t.msg,null)>-1:t.msg},on:{touchend:t.setInputFocus,change:function(e){var n=t.msg,o=e.target,i=!!o.checked;if(Array.isArray(n)){var a=t._i(n,null);o.checked?a<0&&(t.msg=n.concat([null])):a>-1&&(t.msg=n.slice(0,a).concat(n.slice(a+1)))}else t.msg=i}}},"input",t.getInputAttrs(),!1)):"radio"===t.getInputAttrs().type?n("input",t._b({directives:[{name:"model",rawName:"v-model",value:t.msg,expression:"msg"}],ref:"input",staticClass:"vux-prompt-msgbox",attrs:{placeholder:t.placeholder,type:"radio"},domProps:{checked:t._q(t.msg,null)},on:{touchend:t.setInputFocus,change:function(e){t.msg=null}}},"input",t.getInputAttrs(),!1)):n("input",t._b({directives:[{name:"model",rawName:"v-model",value:t.msg,expression:"msg"}],ref:"input",staticClass:"vux-prompt-msgbox",attrs:{placeholder:t.placeholder,type:t.getInputAttrs().type},domProps:{value:t.msg},on:{touchend:t.setInputFocus,input:function(e){e.target.composing||(t.msg=e.target.value)}}},"input",t.getInputAttrs(),!1))]):n("div",{staticClass:"weui-dialog__bd"},[t._t("default",[n("div",{domProps:{innerHTML:t._s(t.content)}})])],2)]:t._e(),t._v(" "),n("div",{staticClass:"weui-dialog__ft"},[t.showCancelButton?n("a",{staticClass:"weui-dialog__btn weui-dialog__btn_default",attrs:{href:"javascript:;"},on:{click:t._onCancel}},[t._v(t._s(t.cancelText||"取消"))]):t._e(),t._v(" "),t.showConfirmButton?n("a",{staticClass:"weui-dialog__btn",class:"weui-dialog__btn_"+t.confirmType,attrs:{href:"javascript:;"},on:{click:t._onConfirm}},[t._v(t._s(t.confirmText||"确定"))]):t._e()])],2)],1)},p=[],f={render:h,staticRenderFns:p},m=f,g=n("VU/8"),v=o,w=g(d,m,!1,v,null,null),_=w.exports,x=(n("YN+o"),n("FWz8")),y=(r.a,l.a,u.a,{components:{Panel:r.a,Group:l.a,Radio:u.a,Confirm:_},watch:{type:function(t,e){this.list=[],this.getData()},userid:function(t,e){}},methods:{onImgError:function(t,e){console.log(t,e)},getData:function(){this.$vux.loading.show({text:"Loading"});var t=this;4!=this.type?Object(x.d)(this.pageindex,6,this.userid,this.type).then(function(e){if(t.$vux.loading.hide(),e.data.length>0){t.pageindex++,t.title="当前拥有 "+e.count+" 条订单数据";for(var n=0;n<e.data.length;n++){var o=e.data[n];t.list.push(t.CrateItem(o))}}else t.$vux.toast.show({text:"没有更多数据了"})}).catch(function(e){console.log(e),t.$vux.loading.hide(),alert("获取超时")}):Object(x.c)(this.pageindex,6,this.points.lat,this.points.lon).then(function(e){if(t.$vux.loading.hide(),e.data.length>0){t.pageindex++,t.title="当前拥有 "+e.count+" 条订单数据";for(var n=0;n<e.data.length;n++){var o=e.data[n];t.list.push(t.CrateItem(o))}}else t.$vux.toast.show({text:"没有更多数据了"})}).catch(function(e){console.log(e),t.$vux.loading.hide(),alert("获取超时")})},CrateItem:function(t){var e={desc:"",meta:{source:"来源信息",date:"时间",other:""},data:null};return e.desc="从"+t.startlocation+"到"+t.endlocation+"的订单.",e.meta.source="价格:"+t.driverprice,e.meta.date=t.startTime.split("+")[0].replace("T"," "),e.data=t,e},onConfirm:function(){this.recOrderFun(this.tmp)},commit:function(t){console.log(t),this.show=!0,this.tmp=t},recOrderFun:function(t){console.log(this.driverInfo);var e={state:4,driverid:this.driverInfo.userid,driverInfo:s()(this.driverInfo)},n=this,o=JSON.parse(t.data.ordersInfo);Object(x.h)(t.data.id,e).then(function(t){if(t){var e="您从"+o.startingPoint+"到"+o.endingPoint+"的订单已经被接收。\r\n司机称呼："+n.driverInfo.usercall+"\r\n联系方式:"+n.driverInfo.mobile,i="您接收从"+o.startingPoint+"到"+o.endingPoint+"的订单已经被接收。\r\n用户称呼："+o.nickname+"\r\n联系方式:"+o.rider+"\r\n时间："+o.StartTime;n.$vux.toast.show({text:"接单成功。"}),Object(x.e)(o.openid,e),console.log("driverInfo",n.driverInfo),Object(x.e)(n.driverInfo.openid,i)}else n.$vux.toast.show({text:"订单已经被其他用户接单。"})})},onfooter:function(){this.getData()}},data:function(){return{list:[],title:"",footer:{title:"获取更多..."},pageindex:1,show:!1,tmp:{}}},created:function(){this.getData()},props:["type","userid","driverInfo","points"]}),I=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"Colorfont",staticStyle:{overflow:"auto",height:"80vh"}},[n("panel",{attrs:{header:t.title,footer:t.footer,list:t.list,type:"4"},on:{"on-click-item":t.commit,"on-click-footer":t.onfooter,"on-img-error":t.onImgError}}),t._v(" "),n("div",[n("confirm",{attrs:{title:"是否接收订单"},on:{"on-confirm":t.onConfirm},model:{value:t.show,callback:function(e){t.show=e},expression:"show"}},[n("p",{staticStyle:{"text-align":"center"}},[t._v("需要接单吗？")])])],1)],1)},C=[],b={render:I,staticRenderFns:C},S=b,k=n("VU/8"),B=i,$=k(y,S,!1,B,"data-v-49f298b1",null);e.default=$.exports},nnSp:function(t,e){},"y0+N":function(t,e){}});
//# sourceMappingURL=3.8e76f7e32b9c400dd3ce.js.map